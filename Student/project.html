<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VLUTaskMate - Project Details</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../assets/style.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'vlu-red': '#dc2626',
                        'vlu-light-red': '#fef2f2',
                        'vlu-gray': '#6b7280'
                    }
                }
            }
        }
    </script>
    <style>
        /* Drag and Drop Styles */
        .task-card.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            z-index: 1000;
        }

        .kanban-column.drag-over {
            background-color: #f3f4f6;
            border: 2px dashed #3b82f6;
            border-radius: 8px;
        }

        .kanban-column.drag-over .kanban-task-list {
            min-height: 100px;
        }

        .drop-indicator {
            height: 3px;
            background-color: #3b82f6;
            margin: 8px 0;
            border-radius: 2px;
            transition: all 0.2s ease;
        }

        .task-card.drag-over {
            border: 2px dashed #3b82f6;
            background-color: #eff6ff;
        }

        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-50">
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold text-vlu-red">VLUTaskMate</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <button id="notificationBtn" class="relative p-2 text-gray-600 hover:text-gray-900">
                            <i class="fas fa-bell"></i>
                            <span class="absolute top-0 right-0 block h-2 w-2 rounded-full bg-vlu-red"></span>
                        </button>
                        
                        <div id="notificationDropdown" class="absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50 hidden">
                            <div class="flex items-center justify-between p-4 border-b border-gray-200">
                                <h3 class="text-lg font-semibold text-gray-900">Notifications</h3>
                                <button id="closeNotifications" class="text-gray-400 hover:text-gray-600">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            
                            <div class="max-h-96 overflow-y-auto">
                                <div class="p-4 border-b border-gray-100 hover:bg-gray-50">
                                    <div class="flex items-start space-x-3">
                                        <div class="flex-shrink-0">
                                            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                                <i class="fas fa-tasks text-blue-600 text-sm"></i>
                                            </div>
                                        </div>
                                        <div class="flex-1 min-w-0">
                                            <p class="text-sm font-medium text-gray-900">You have a new task assigned</p>
                                            <p class="text-sm text-gray-500 mt-1">"Interface Design" in the E-commerce Website project</p>
                                            <p class="text-xs text-gray-400 mt-1">2 minutes ago</p>
                                        </div>
                                        <div class="flex flex-col space-y-1">
                                            <button class="bg-green-500 text-white px-3 py-1 rounded text-xs font-medium hover:bg-green-600 transition-colors">
                                                Confirm
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <div class="p-4 border-b border-gray-100 hover:bg-gray-50">
                                    <div class="flex items-start space-x-3">
                                        <div class="flex-shrink-0">
                                            <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                                                <i class="fas fa-users text-purple-600 text-sm"></i>
                                            </div>
                                        </div>
                                        <div class="flex-1 min-w-0">
                                            <p class="text-sm font-medium text-gray-900">Group Invitation</p>
                                            <p class="text-sm text-gray-500 mt-1">You are invited to join the "Library Management System" project</p>
                                            <p class="text-xs text-gray-400 mt-1">15 minutes ago</p>
                                        </div>
                                        <div class="flex flex-col space-y-1">
                                            <button class="bg-green-500 text-white px-3 py-1 rounded text-xs font-medium hover:bg-green-600 transition-colors">
                                                Accept
                                            </button>
                                            <button class="bg-red-500 text-white px-3 py-1 rounded text-xs font-medium hover:bg-red-600 transition-colors">
                                                Decline
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="p-4 border-t border-gray-200">
                                <button onclick="window.location.href='notifications.html'" class="w-full text-center text-sm text-vlu-red hover:text-red-700 font-medium">
                                    View all notifications
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="relative">
                        <button id="userMenuBtn" class="flex items-center space-x-2 text-gray-700 hover:text-gray-900">
                            <img class="h-8 w-8 rounded-full bg-gray-300" src="https://via.placeholder.com/32" alt="User">
                            <span class="text-sm font-medium">Ho Du Tuan Dat</span>
                            <i class="fas fa-chevron-down text-xs"></i>
                        </button>
                        
                        <div id="userMenuDropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50 hidden">
                            <div class="py-1">
                                <button onclick="window.location.href='profile.html'" class="flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                    <i class="fas fa-user mr-3"></i>
                                    Profile
                                </button>
                                <a href="../logout.html" class="flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                    <i class="fas fa-sign-out-alt mr-3"></i>
                                    Log out
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="flex h-screen bg-gray-50">
        <aside class="w-64 bg-white shadow-sm">
            <nav class="mt-8">
                <div class="px-4 space-y-2">
                    <a href="index.html" class="flex items-center px-4 py-3 text-vlu-red bg-red-50 rounded-lg font-medium">
                        <i class="fas fa-folder mr-3"></i>
                        My Groups
                    </a>
                    <a href="my-tasks.html" class="flex items-center px-4 py-3 text-gray-600 hover:text-vlu-red hover:bg-gray-50 rounded-lg">
                        <i class="fas fa-tasks mr-3"></i>
                        My Tasks
                    </a>
                    <a href="notifications.html" class="flex items-center px-4 py-3 text-gray-600 hover:text-vlu-red hover:bg-gray-50 rounded-lg">
                        <i class="fas fa-bell mr-3"></i>
                        Notifications
                    </a>
                </div>
            </nav>
        </aside>

        <main class="flex-1 overflow-y-auto">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900">Library Management System</h1>
                            <div class="text-gray-600 mt-2 space-y-1">
                                <p><i class="fas fa-graduation-cap mr-2"></i>Semester 1 - Academic Year 2024-2025</p>
                                <p><i class="fas fa-users mr-2"></i>Class CNTT-K15</p>
                                <p><i class="fas fa-chalkboard-teacher mr-2"></i>Lecturer: Dr. Nguyen Van A</p>
                                <p><i class="fas fa-calendar mr-2"></i>01/12/2024 to 15/12/2024</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
                                Leader
                            </span>
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800">
                                Active
                            </span>
                            <button class="leave-group-toolbar-btn bg-orange-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-orange-600 transition-colors" data-member="Ho Du Tuan Dat" data-role="Leader">
                                <i class="fas fa-sign-out-alt mr-2"></i>
                                Leave Group
                            </button>
                        </div>
                    </div>
                    <p class="text-gray-700">Develop an online library management system with features for borrowing/returning books, managing readers, and statistical reports.</p>
                </div>

                <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-6">
                    <nav class="flex space-x-8 px-6">
                        <button class="tab-btn py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium" data-tab="members">
                            <i class="fas fa-users mr-2"></i>
                            Group Members
                        </button>
                        <button class="tab-btn active py-4 px-1 border-b-2 border-vlu-red text-vlu-red font-medium" data-tab="tasks">
                            <i class="fas fa-tasks mr-2"></i>
                            Tasks
                        </button>
                        <button class="tab-btn py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium" data-tab="evaluation">
                            <i class="fas fa-chart-bar mr-2"></i>
                            Evaluation
                        </button>
                        <button class="tab-btn py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium" data-tab="close">
                            <i class="fas fa-lock mr-2"></i>
                            Close Project
                        </button>
                    </nav>
                </div>

                <div id="tabContent">
                    <div id="members" class="tab-content hidden" data-tab-content="members">
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-lg font-semibold text-gray-900">Group Members</h3>
                                <button id="inviteMemberBtn" class="bg-vlu-red text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-700 transition-colors">
                                    <i class="fas fa-plus mr-2"></i>
                                    Invite Member
                                </button>
                            </div>
                            
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                                    <div class="flex items-center space-x-4">
                                        <img class="h-10 w-10 rounded-full bg-gray-300" src="https://via.placeholder.com/40" alt="Member">
                                        <div>
                                            <h4 class="font-medium text-gray-900">Ho Du Tuan Dat</h4>
                                            <p class="text-sm text-gray-500">2374802010097 - 72K29CNTT01</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            Leader
                                        </span>
                                        <button class="kick-member-btn text-red-600 hover:text-red-800 font-medium text-sm px-3 py-1 rounded border border-red-600 hover:bg-red-50 transition-colors" data-member="Ho Du Tuan Dat">
                                            <i class="fas fa-user-times mr-1"></i>
                                            Kick
                                        </button>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                                    <div class="flex items-center space-x-4">
                                        <img class="h-10 w-10 rounded-full bg-gray-300" src="https://via.placeholder.com/40" alt="Member">
                                        <div>
                                            <h4 class="font-medium text-gray-900">Nguyen Van A</h4>
                                            <p class="text-sm text-gray-500">2374802010098 - 72K29CNTT01</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                            Member
                                        </span>
                                        <button class="kick-member-btn text-red-600 hover:text-red-800 font-medium text-sm px-3 py-1 rounded border border-red-600 hover:bg-red-50 transition-colors" data-member="Nguyen Van A">
                                            <i class="fas fa-user-times mr-1"></i>
                                            Kick
                                        </button>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                                    <div class="flex items-center space-x-4">
                                        <img class="h-10 w-10 rounded-full bg-gray-300" src="https://via.placeholder.com/40" alt="Member">
                                        <div>
                                            <h4 class="font-medium text-gray-900">Tran Thi B</h4>
                                            <p class="text-sm text-gray-500">2374802010099 - 72K29CNTT01</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                            Member
                                        </span>
                                        <button class="kick-member-btn text-red-600 hover:text-red-800 font-medium text-sm px-3 py-1 rounded border border-red-600 hover:bg-red-50 transition-colors" data-member="Tran Thi B">
                                            <i class="fas fa-user-times mr-1"></i>
                                            Kick
                                        </button>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between p-4 border border-yellow-200 rounded-lg bg-yellow-50">
                                    <div class="flex items-center space-x-4">
                                        <img class="h-10 w-10 rounded-full bg-gray-300" src="https://via.placeholder.com/40" alt="Member">
                                        <div>
                                            <h4 class="font-medium text-gray-900">Le Van C</h4>
                                            <p class="text-sm text-gray-500">2374802010100 - 72K29CNTT01</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                            <i class="fas fa-clock mr-1"></i>
                                            Pending
                                        </span>
                                        <button class="kick-member-btn text-red-600 hover:text-red-800 font-medium text-sm px-3 py-1 rounded border border-red-600 hover:bg-red-50 transition-colors" data-member="Le Van C">
                                            <i class="fas fa-user-times mr-1"></i>
                                            Kick
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="tasks" class="tab-content active" data-tab-content="tasks">
                        <div class="bg-gray-50 rounded-lg p-6">

                            <div class="flex space-x-6 overflow-x-auto pb-4">
                                <div class="flex-shrink-0 w-80">
                                    <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                                        <div class="p-4 border-b border-gray-200">
                                            <div class="flex items-center justify-between">
                                                <h4 class="font-medium text-gray-900">To Do <span class="text-sm text-gray-500 task-count">(2)</span></h4>
                                                <button class="text-gray-400 hover:text-gray-600">
                                                    <i class="fas fa-ellipsis-h"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="p-4 kanban-column" data-column="todo">
                                            <div class="space-y-3 kanban-task-list">
                                                <div class="bg-gray-50 rounded-lg p-3 cursor-pointer task-card hover:bg-gray-100 transition-colors" draggable="true" data-task-id="1" data-task-title="Student Attendance by QR" data-task-description="As a student, I want to scan a QR code for quick and accurate attendance." data-task-type="Feature" data-task-priority="High">
                                                    <div class="flex items-start justify-between mb-2">
                                                        <h5 class="font-medium text-gray-900 text-sm">Student Attendance by QR</h5>
                                                        <button class="text-gray-400 hover:text-gray-600">
                                                            <i class="fas fa-ellipsis-h text-xs"></i>
                                                        </button>
                                                    </div>
                                                    <p class="text-xs text-gray-600 mb-3">As a student, I want to scan a QR code for quick and accurate attendance.</p>
                                                    <div class="flex items-center justify-between">
                                                        <div class="flex items-center space-x-2">
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                                                Feature
                                                            </span>
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                                High
                                                            </span>
                                                        </div>
                                                        <div class="flex items-center space-x-1">
                                                            <img class="h-6 w-6 rounded-full bg-purple-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/24" alt="User">
                                                            <span class="text-xs text-gray-500">2d</span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="bg-gray-50 rounded-lg p-3 cursor-pointer task-card hover:bg-gray-100 transition-colors" draggable="true" data-task-id="2" data-task-title="Database Design" data-task-description="Design the database structure for the library system" data-task-type="Backend" data-task-priority="High">
                                                    <div class="flex items-start justify-between mb-2">
                                                        <h5 class="font-medium text-gray-900 text-sm">Database Design</h5>
                                                        <button class="text-gray-400 hover:text-gray-600">
                                                            <i class="fas fa-ellipsis-h text-xs"></i>
                                                        </button>
                                                    </div>
                                                    <p class="text-xs text-gray-600 mb-3">Design the database structure for the library system</p>
                                                    <div class="flex items-center justify-between">
                                                        <div class="flex items-center space-x-2">
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                                Backend
                                                            </span>
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                                High
                                                            </span>
                                                        </div>
                                                        <div class="flex items-center space-x-1">
                                                            <img class="h-6 w-6 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/24" alt="User">
                                                            <span class="text-xs text-gray-500">1d</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <button class="add-card-btn w-full mt-3 p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors text-sm" data-column="todo">
                                                <i class="fas fa-plus mr-2"></i>
                                                Add a task
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex-shrink-0 w-80">
                                    <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                                        <div class="p-4 border-b border-gray-200">
                                            <div class="flex items-center justify-between">
                                                <h4 class="font-medium text-gray-900">In Progress <span class="text-sm text-gray-500 task-count">(1)</span></h4>
                                                <button class="text-gray-400 hover:text-gray-600">
                                                    <i class="fas fa-ellipsis-h"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="p-4 kanban-column" data-column="inprogress">
                                            <div class="space-y-3 kanban-task-list">
                                                <div class="bg-gray-50 rounded-lg p-3 cursor-pointer task-card hover:bg-gray-100 transition-colors" draggable="true" data-task-id="3" data-task-title="Frontend Development" data-task-description="Develop user interface with React" data-task-type="Frontend" data-task-priority="Medium">
                                                    <div class="flex items-start justify-between mb-2">
                                                        <h5 class="font-medium text-gray-900 text-sm">Frontend Development</h5>
                                                        <button class="text-gray-400 hover:text-gray-600">
                                                            <i class="fas fa-ellipsis-h text-xs"></i>
                                                        </button>
                                                    </div>
                                                    <p class="text-xs text-gray-600 mb-3">Develop user interface with React</p>
                                                    <div class="flex items-center justify-between">
                                                        <div class="flex items-center space-x-2">
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                                                Frontend
                                                            </span>
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                                                Medium
                                                            </span>
                                                        </div>
                                                        <div class="flex items-center space-x-1">
                                                            <img class="h-6 w-6 rounded-full bg-green-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/24" alt="User">
                                                            <span class="text-xs text-gray-500">3d</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <button class="add-card-btn w-full mt-3 p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors text-sm" data-column="inprogress">
                                                <i class="fas fa-plus mr-2"></i>
                                                Add a task
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex-shrink-0 w-80">
                                    <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                                        <div class="p-4 border-b border-gray-200">
                                            <div class="flex items-center justify-between">
                                                <h4 class="font-medium text-gray-900">Review <span class="text-sm text-gray-500 task-count">(1)</span></h4>
                                                <button class="text-gray-400 hover:text-gray-600">
                                                    <i class="fas fa-ellipsis-h"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="p-4 kanban-column" data-column="review">
                                            <div class="space-y-3 kanban-task-list">
                                                <div class="bg-gray-50 rounded-lg p-3 cursor-pointer task-card hover:bg-gray-100 transition-colors" draggable="true" data-task-id="4" data-task-title="API Documentation" data-task-description="Write API documentation for the system" data-task-type="Docs" data-task-priority="Low">
                                                    <div class="flex items-start justify-between mb-2">
                                                        <h5 class="font-medium text-gray-900 text-sm">API Documentation</h5>
                                                        <button class="text-gray-400 hover:text-gray-600">
                                                            <i class="fas fa-ellipsis-h text-xs"></i>
                                                        </button>
                                                    </div>
                                                    <p class="text-xs text-gray-600 mb-3">Write API documentation for the system</p>
                                                    <div class="flex items-center justify-between">
                                                        <div class="flex items-center space-x-2">
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                                                Docs
                                                            </span>
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                                Low
                                                            </span>
                                                        </div>
                                                        <div class="flex items-center space-x-1">
                                                            <img class="h-6 w-6 rounded-full bg-orange-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/24" alt="User">
                                                            <span class="text-xs text-gray-500">1d</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <button class="add-card-btn w-full mt-3 p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors text-sm" data-column="review">
                                                <i class="fas fa-plus mr-2"></i>
                                                Add a task
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex-shrink-0 w-80">
                                    <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                                        <div class="p-4 border-b border-gray-200">
                                            <div class="flex items-center justify-between">
                                                <h4 class="font-medium text-gray-900">Done <span class="text-sm text-gray-500 task-count">(1)</span></h4>
                                                <button class="text-gray-400 hover:text-gray-600">
                                                    <i class="fas fa-ellipsis-h"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="p-4 kanban-column" data-column="done">
                                            <div class="space-y-3 kanban-task-list">
                                                <div class="bg-gray-50 rounded-lg p-3 cursor-pointer task-card hover:bg-gray-100 transition-colors" draggable="true" data-task-id="5" data-task-title="Project Setup" data-task-description="Initial project setup" data-task-type="Setup" data-task-priority="Completed">
                                                    <div class="flex items-start justify-between mb-2">
                                                        <h5 class="font-medium text-gray-900 text-sm">Project Setup</h5>
                                                        <button class="text-gray-400 hover:text-gray-600">
                                                            <i class="fas fa-ellipsis-h text-xs"></i>
                                                        </button>
                                                    </div>
                                                    <p class="text-xs text-gray-600 mb-3">Initial project setup</p>
                                                    <div class="flex items-center justify-between">
                                                        <div class="flex items-center space-x-2">
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                                Setup
                                                            </span>
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                                Completed
                                                            </span>
                                                        </div>
                                                        <div class="flex items-center space-x-1">
                                                            <img class="h-6 w-6 rounded-full bg-gray-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/24" alt="User">
                                                            <span class="text-xs text-gray-500">5d</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <button class="add-card-btn w-full mt-3 p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors text-sm" data-column="done">
                                                <i class="fas fa-plus mr-2"></i>
                                                Add a task
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex-shrink-0 w-80">
                                    <button class="w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center text-gray-500 hover:text-gray-700 hover:border-gray-400 transition-colors">
                                        <i class="fas fa-plus mr-2"></i>
                                        Add another list
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="evaluation" class="tab-content hidden" data-tab-content="evaluation">
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-lg font-semibold text-gray-900">Member Evaluation</h3>
                                <button id="submitEvaluationBtn" class="bg-vlu-red text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-700 transition-colors">
                                    <i class="fas fa-paper-plane mr-2"></i>
                                    Submit Evaluation
                                </button>
                            </div>

                            <div id="evaluationStatus" class="mb-6">
                                </div>

                            <div class="space-y-6" id="evaluationContent">
                                <div class="border border-gray-200 rounded-lg p-6">
                                    <h4 class="font-medium text-gray-900 mb-4">Evaluate Member</h4>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Select Member</label>
                                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                                                <option>Nguyen Van A</option>
                                                <option>Tran Thi B</option>
                                                <option>Le Van C</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Rating</label>
                                            <div class="flex items-center space-x-2">
                                                <i class="fas fa-star text-yellow-400 text-xl"></i>
                                                <i class="fas fa-star text-yellow-400 text-xl"></i>
                                                <i class="fas fa-star text-yellow-400 text-xl"></i>
                                                <i class="fas fa-star text-yellow-400 text-xl"></i>
                                                <i class="far fa-star text-gray-300 text-xl"></i>
                                            </div>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Comments</label>
                                            <textarea class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" rows="3" placeholder="Enter your comments..."></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Tags</label>
                                            <div class="flex flex-wrap gap-2">
                                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 cursor-pointer hover:bg-green-200">
                                                    Positive
                                                </span>
                                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800 cursor-pointer hover:bg-red-200">
                                                    Uncooperative
                                                </span>
                                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200">
                                                    Proactive
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="border border-gray-200 rounded-lg p-6">
                                    <h4 class="font-medium text-gray-900 mb-4">Your Evaluation Results</h4>
                                    <div class="space-y-4">
                                        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                            <div>
                                                <h5 class="font-medium text-gray-900">Nguyen Van A</h5>
                                                <p class="text-sm text-gray-600">Average Score: 4.2/5</p>
                                            </div>
                                            <div class="flex items-center space-x-1">
                                                <i class="fas fa-star text-yellow-400"></i>
                                                <i class="fas fa-star text-yellow-400"></i>
                                                <i class="fas fa-star text-yellow-400"></i>
                                                <i class="fas fa-star text-yellow-400"></i>
                                                <i class="far fa-star text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="close" class="tab-content hidden" data-tab-content="close">
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div class="text-center">
                                <i class="fas fa-lock text-4xl text-gray-400 mb-4"></i>
                                <h3 class="text-lg font-semibold text-gray-900 mb-2">Close Project</h3>
                                <p class="text-gray-600 mb-6">Check conditions before closing the project</p>
                                
                                <div class="space-y-4 mb-6">
                                    <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                                        <div class="flex items-center">
                                            <i class="fas fa-check-circle text-green-500 mr-3"></i>
                                            <span class="text-gray-900">All tasks completed</span>
                                        </div>
                                        <span class="text-green-600 font-medium">✓</span>
                                    </div>
                                    <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                                        <div class="flex items-center">
                                            <i class="fas fa-check-circle text-green-500 mr-3"></i>
                                            <span class="text-gray-900">All evaluations submitted</span>
                                        </div>
                                        <span class="text-green-600 font-medium">✓</span>
                                    </div>
                                </div>

                                <button id="closeProjectBtn" class="bg-red-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-colors">
                                    <i class="fas fa-lock mr-2"></i>
                                    Close Project
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="inviteMemberModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Invite Member</h3>
                    <button id="closeInviteModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="inviteMemberForm">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <div class="flex space-x-2">
                            <input type="email" id="inviteEmail" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" placeholder="example@vlu.edu.vn">
                            <button type="button" id="addInviteBtn" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm">
                                <i class="fas fa-plus mr-1"></i>
                                Add
                            </button>
                        </div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Role</label>
                        <select id="inviteRole" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                            <option>Member</option>
                            <option>Leader</option>
                        </select>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Invited Members</label>
                        <div id="invitedMembersList" class="space-y-2 max-h-32 overflow-y-auto">
                            <!-- Invited members will be displayed here -->
                        </div>
                    </div>
                    
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelInvite" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">Cancel</button>
                        <button type="submit" class="px-4 py-2 bg-vlu-red text-white rounded-md hover:bg-red-700">Send Invitations</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="createTaskModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Create New Task</h3>
                    <button id="closeTaskModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Task Name</label>
                        <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" rows="3"></textarea>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Deadline</label>
                        <input type="date" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Assign to</label>
                        <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                            <option>Nguyen Van A</option>
                            <option>Tran Thi B</option>
                            <option>Le Van C</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Priority</label>
                        <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                            <option>High</option>
                            <option>Medium</option>
                            <option>Low</option>
                        </select>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelTask" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">Cancel</button>
                        <button type="submit" class="px-4 py-2 bg-vlu-red text-white rounded-md hover:bg-red-700">Create Task</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="kickMemberModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Confirm Kick Member</h3>
                    <button id="closeKickModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="mb-6">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-exclamation-triangle text-red-600 text-xl"></i>
                        </div>
                        <div>
                            <h4 class="font-medium text-gray-900">Are you sure you want to kick this member?</h4>
                            <p class="text-sm text-gray-600 mt-1">This action cannot be undone.</p>
                        </div>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <img class="h-8 w-8 rounded-full bg-gray-300" src="https://via.placeholder.com/32" alt="Member">
                            <div>
                                <p class="font-medium text-gray-900" id="kickMemberName">Member Name</p>
                                <p class="text-sm text-gray-500" id="kickMemberInfo">Member Info</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex justify-end space-x-3">
                    <button id="cancelKick" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">
                        Cancel
                    </button>
                    <button id="confirmKick" class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700">
                        <i class="fas fa-user-times mr-2"></i>
                        Kick Member
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="addCardModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Add New Task</h3>
                    <button id="closeAddCardModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="addCardForm">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Task Name</label>
                        <input type="text" id="newTaskTitle" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" placeholder="Enter task name...">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea id="newTaskDescription" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" rows="3" placeholder="Task description..."></textarea>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Type</label>
                            <select id="newTaskType" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                                <option value="Feature">Feature</option>
                                <option value="Backend">Backend</option>
                                <option value="Frontend">Frontend</option>
                                <option value="Docs">Docs</option>
                                <option value="Setup">Setup</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Priority</label>
                            <select id="newTaskPriority" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                                <option value="High">High</option>
                                <option value="Medium">Medium</option>
                                <option value="Low">Low</option>
                            </select>
                        </div>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelAddCard" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">Cancel</button>
                        <button type="submit" class="bg-vlu-red text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors">Add Task</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="taskDetailModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-10 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center space-x-4">
                        <select id="taskStatus" class="px-3 py-1 border border-gray-300 rounded-md text-sm font-medium">
                            <option value="todo">To Do</option>
                            <option value="inprogress">In Progress</option>
                            <option value="review">Review</option>
                            <option value="done">Done</option>
                        </select>
                        <h3 class="text-xl font-medium text-gray-900" id="taskDetailTitle">Task Name</h3>
                    </div>
                    <button id="closeTaskDetailModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="grid grid-cols-3 gap-6">
                    <div class="col-span-2 space-y-6">
                        <div>
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="font-medium text-gray-900">Description</h4>
                                <button id="editDescription" class="text-vlu-red hover:text-red-700 text-sm">
                                    <i class="fas fa-edit mr-1"></i>
                                    Edit
                                </button>
                            </div>
                            <div id="descriptionContent" class="bg-gray-50 p-4 rounded-lg">
                                <p id="taskDescription" class="text-gray-700">Task description will be displayed here...</p>
                            </div>
                            <div id="descriptionEdit" class="hidden">
                                <textarea id="descriptionTextarea" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" rows="3"></textarea>
                                <div class="flex justify-end space-x-2 mt-2">
                                    <button id="cancelEditDescription" class="px-3 py-1 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 text-sm">Cancel</button>
                                    <button id="saveDescription" class="px-3 py-1 bg-vlu-red text-white rounded-md hover:bg-red-700 text-sm">Save</button>
                                </div>
                            </div>
                        </div>

                        <div>
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="font-medium text-gray-900">Subtasks</h4>
                                <button id="addSubtaskItem" class="text-vlu-red hover:text-red-700 text-sm">
                                    <i class="fas fa-plus mr-1"></i>
                                    Add subtask
                                </button>
                            </div>
                            <div id="subtasksContainer" class="space-y-2">
                                <div class="subtask-item flex items-center space-x-3 p-2 hover:bg-gray-50 rounded">
                                    <input type="checkbox" class="rounded text-vlu-red focus:ring-vlu-red">
                                    <span class="flex-1 text-sm text-gray-700">Design interface</span>
                                    <button class="text-gray-400 hover:text-red-600 text-xs">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                                <div class="subtask-item flex items-center space-x-3 p-2 hover:bg-gray-50 rounded">
                                    <input type="checkbox" class="rounded text-vlu-red focus:ring-vlu-red">
                                    <span class="flex-1 text-sm text-gray-700">Build API</span>
                                    <button class="text-gray-400 hover:text-red-600 text-xs">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                                <div class="subtask-item flex items-center space-x-3 p-2 hover:bg-gray-50 rounded">
                                    <input type="checkbox" class="rounded text-vlu-red focus:ring-vlu-red">
                                    <span class="flex-1 text-sm text-gray-700">Save data</span>
                                    <button class="text-gray-400 hover:text-red-600 text-xs">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h4 class="font-medium text-gray-900 mb-3">Comments</h4>
                            <div class="space-y-4">
                                <div class="flex space-x-3">
                                    <img class="h-8 w-8 rounded-full bg-purple-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/32" alt="User">
                                    <div class="flex-1">
                                        <div class="bg-gray-50 p-3 rounded-lg">
                                            <div class="flex items-center justify-between mb-1">
                                                <span class="font-medium text-sm text-gray-900">Shino</span>
                                                <span class="text-xs text-gray-500">Feb 21, 2025, 12:32 AM</span>
                                            </div>
                                            <p class="text-sm text-gray-700">This task needs to be completed soon!</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-4">
                                <textarea id="newComment" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" rows="2" placeholder="Write a comment..."></textarea>
                                <div class="flex justify-end space-x-2 mt-2">
                                    <button id="saveAllChangesBtn" class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm">
                                        <i class="fas fa-save mr-1"></i>
                                        Save All
                                    </button>
                                    <button id="addComment" class="px-4 py-2 bg-vlu-red text-white rounded-md hover:bg-red-700 transition-colors text-sm">Add Comment</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="space-y-6">
                        <div class="space-y-2">
                            <button id="addDatesBtn" class="w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-md text-sm transition-colors">
                                <i class="fas fa-calendar mr-2"></i>
                                Dates
                            </button>
                            <button id="addMembersBtn" class="w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-md text-sm transition-colors">
                                <i class="fas fa-users mr-2"></i>
                                Members
                            </button>
                            <button id="addAttachmentBtn" class="w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-md text-sm transition-colors">
                                <i class="fas fa-paperclip mr-2"></i>
                                Attachment
                            </button>
                        </div>

                        <div>
                            <h4 class="font-medium text-gray-900 mb-3">Labels</h4>
                            <div id="labelsContainer" class="space-y-2">
                                <div class="flex items-center justify-between">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                        Feature
                                    </span>
                                    <button class="remove-label-btn text-gray-400 hover:text-red-600 text-xs transition-colors" data-label="Feature">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                        High
                                    </span>
                                    <button class="remove-label-btn text-gray-400 hover:text-red-600 text-xs transition-colors" data-label="High">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <button id="addLabelBtn" class="mt-2 text-vlu-red hover:text-red-700 text-sm transition-colors">
                                <i class="fas fa-plus mr-1"></i>
                                Add label
                            </button>
                        </div>

                        <div>
                            <h4 class="font-medium text-gray-900 mb-3">Activity</h4>
                            <div id="activityContainer" class="space-y-3">
                                <div class="flex items-start space-x-3">
                                    <img class="h-6 w-6 rounded-full bg-purple-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/24" alt="User">
                                    <div class="flex-1">
                                        <p class="text-sm text-gray-700">Shino added this card to Backlog</p>
                                        <p class="text-xs text-gray-500">Feb 21, 2025, 12:32 AM</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="addDatesModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Add Dates</h3>
                    <button id="closeDatesModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="addDatesForm">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Start Date</label>
                        <input type="date" id="startDate" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">End Date</label>
                        <input type="date" id="endDate" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelDates" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">Cancel</button>
                        <button type="submit" class="bg-vlu-red text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="addMembersModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Add Members</h3>
                    <button id="closeMembersModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Find member</label>
                    <input type="text" id="searchMember" placeholder="Enter name or email..." class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                </div>
                <div id="membersList" class="space-y-2 mb-4">
                    <div class="flex items-center justify-between p-2 hover:bg-gray-50 rounded">
                        <div class="flex items-center space-x-3">
                            <img class="h-8 w-8 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/32" alt="User">
                            <div>
                                <p class="font-medium text-sm text-gray-900">Nguyen Van A</p>
                                <p class="text-xs text-gray-500">nguyenvana@vlu.edu.vn</p>
                            </div>
                        </div>
                        <button class="add-member-btn px-3 py-1 bg-vlu-red text-white rounded-md hover:bg-red-700 transition-colors text-sm" data-member="Nguyen Van A">
                            Add
                        </button>
                    </div>
                    <div class="flex items-center justify-between p-2 hover:bg-gray-50 rounded">
                        <div class="flex items-center space-x-3">
                            <img class="h-8 w-8 rounded-full bg-green-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/32" alt="User">
                            <div>
                                <p class="font-medium text-sm text-gray-900">Tran Thi B</p>
                                <p class="text-xs text-gray-500">tranthib@vlu.edu.vn</p>
                            </div>
                        </div>
                        <button class="add-member-btn px-3 py-1 bg-vlu-red text-white rounded-md hover:bg-red-700 transition-colors text-sm" data-member="Tran Thi B">
                            Add
                        </button>
                    </div>
                </div>
                <div class="flex justify-end">
                    <button id="cancelMembers" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div id="addLabelModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Add Label</h3>
                    <button id="closeLabelModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="addLabelForm">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Label Name</label>
                        <input type="text" id="newLabelName" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" placeholder="Enter label name...">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Color</label>
                        <div class="grid grid-cols-5 gap-2">
                            <button type="button" class="label-color-btn w-8 h-8 bg-blue-500 rounded-full border-2 border-transparent hover:border-gray-300" data-color="blue"></button>
                            <button type="button" class="label-color-btn w-8 h-8 bg-green-500 rounded-full border-2 border-transparent hover:border-gray-300" data-color="green"></button>
                            <button type="button" class="label-color-btn w-8 h-8 bg-yellow-500 rounded-full border-2 border-transparent hover:border-gray-300" data-color="yellow"></button>
                            <button type="button" class="label-color-btn w-8 h-8 bg-red-500 rounded-full border-2 border-transparent hover:border-gray-300" data-color="red"></button>
                            <button type="button" class="label-color-btn w-8 h-8 bg-purple-500 rounded-full border-2 border-transparent hover:border-gray-300" data-color="purple"></button>
                        </div>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelLabel" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">Cancel</button>
                        <button type="submit" class="bg-vlu-red text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors">Add Label</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="addSubtaskModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Add Subtask</h3>
                    <button id="closeSubtaskModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="addSubtaskForm">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Subtask Name</label>
                        <input type="text" id="newSubtaskName" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" placeholder="Enter subtask name...">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description (optional)</label>
                        <textarea id="newSubtaskDescription" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" rows="2" placeholder="Subtask description..."></textarea>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelSubtask" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">Cancel</button>
                        <button type="submit" class="bg-vlu-red text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors">Add Subtask</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="addAttachmentModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Add Attachment File</h3>
                    <button id="closeAttachmentModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="addAttachmentForm">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Choose file</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                            <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                            <p class="text-sm text-gray-600">Drag and drop files here or click to choose</p>
                            <input type="file" id="fileInput" class="hidden" multiple>
                            <button type="button" id="browseFiles" class="mt-2 px-4 py-2 bg-vlu-red text-white rounded-md hover:bg-red-700 transition-colors text-sm">
                                Choose File
                            </button>
                        </div>
                    </div>
                    <div id="selectedFiles" class="mb-4 space-y-2">
                        </div>
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelAttachment" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">Cancel</button>
                        <button type="submit" class="bg-vlu-red text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors">Upload</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="leaveGroupModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Confirm Leave Group</h3>
                    <button id="closeLeaveGroupModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="mb-6">
                    <div class="flex items-center justify-center mb-4">
                        <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-sign-out-alt text-2xl text-orange-600"></i>
                        </div>
                    </div>
                    <div class="text-center">
                        <p class="font-medium text-gray-900" id="leaveGroupMemberName">Member Name</p>
                        <p class="text-sm text-gray-500" id="leaveGroupMemberRole">Role in Group</p>
                    </div>
                    
                    <div id="leaderTransferSection" class="mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg hidden">
                        <div class="flex items-start">
                            <i class="fas fa-crown text-blue-500 mt-1 mr-3"></i>
                            <div class="flex-1">
                                <p class="text-sm font-medium text-blue-900 mb-2">Transfer Leader Role</p>
                                <p class="text-xs text-blue-700 mb-3">Please select a member to transfer Leader role to before leaving the group:</p>
                                <select id="newLeaderSelect" class="w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm">
                                    <option value="">-- Select member --</option>
                                    <option value="Nguyen Van A">Nguyen Van A (Member)</option>
                                    <option value="Tran Thi B">Tran Thi B (Member)</option>
                                    <option value="Le Van C">Le Van C (Pending)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 p-4 bg-orange-50 border border-orange-200 rounded-lg">
                        <div class="flex items-start">
                            <i class="fas fa-exclamation-triangle text-orange-500 mt-1 mr-3"></i>
                            <div>
                                <p class="text-sm font-medium text-orange-900 mb-2">Are you sure you want to leave the group?</p>
                                <ul class="text-xs text-orange-700 space-y-1">
                                    <li>• You will no longer be able to access this project.</li>
                                    <li>• All assigned tasks will be transferred to another member.</li>
                                    <li>• You will need to be invited again if you wish to rejoin the group.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex justify-end space-x-3">
                    <button id="cancelLeaveGroup" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">
                        Cancel
                    </button>
                    <button id="confirmLeaveGroup" class="bg-orange-500 text-white px-4 py-2 rounded-md hover:bg-orange-600 transition-colors">
                        <i class="fas fa-sign-out-alt mr-2"></i>
                        Leave Group
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="../assets/script.js"></script>
    <script>
        // Task Detail Modal Save Functionality
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing task detail modal save functionality...');
            
            // Initialize save buttons for task detail modal
            initializeTaskDetailSaveButtons();
        });

        function initializeTaskDetailSaveButtons() {
            // Save All Changes Button
            const saveAllChangesBtn = document.getElementById('saveAllChangesBtn');
            if (saveAllChangesBtn) {
                saveAllChangesBtn.addEventListener('click', function() {
                    saveAllChanges();
                });
            }

            console.log('Task detail modal save all button initialized');
        }

        function saveAllChanges() {
            console.log('Saving all changes...');
            
            let hasChanges = false;
            const changes = [];
            
            // 1. Save Task Status
            const taskStatusSelect = document.getElementById('taskStatus');
            const taskTitle = document.getElementById('taskDetailTitle');
            if (taskStatusSelect && taskTitle) {
                const newStatus = taskStatusSelect.value;
                const taskName = taskTitle.textContent;
                changes.push(`Status: ${newStatus}`);
                hasChanges = true;
            }
            
            // 2. Save Description (if in edit mode)
            const descriptionTextarea = document.getElementById('descriptionTextarea');
            const descriptionContent = document.getElementById('descriptionContent');
            const taskDescription = document.getElementById('taskDescription');
            
            if (descriptionTextarea && !descriptionTextarea.parentElement.classList.contains('hidden')) {
                const newDescription = descriptionTextarea.value.trim();
                if (newDescription) {
                    // Update the description display
                    taskDescription.textContent = newDescription;
                    
                    // Hide edit mode and show content
                    descriptionTextarea.parentElement.classList.add('hidden');
                    descriptionContent.classList.remove('hidden');
                    
                    changes.push('Task description');
                    hasChanges = true;
                }
            }
            
            // 3. Save Subtasks
            const subtaskCheckboxes = document.querySelectorAll('#subtasksContainer input[type="checkbox"]');
            if (subtaskCheckboxes.length > 0) {
                // Update visual feedback for completed subtasks
                subtaskCheckboxes.forEach((checkbox) => {
                    const subtaskText = checkbox.nextElementSibling;
                    if (checkbox.checked) {
                        subtaskText.classList.add('line-through', 'text-gray-500');
                    } else {
                        subtaskText.classList.remove('line-through', 'text-gray-500');
                    }
                });
                changes.push('Subtasks');
                hasChanges = true;
            }
            
            // 4. Save Comments
            const newCommentTextarea = document.getElementById('newComment');
            const commentText = newCommentTextarea ? newCommentTextarea.value.trim() : '';
            
            if (commentText) {
                // Add new comment to the list
                addNewTaskComment(commentText);
                
                // Clear input
                if (newCommentTextarea) {
                    newCommentTextarea.value = '';
                }
                
                changes.push('New comment');
                hasChanges = true;
            }
            
            // Show notification based on changes
            if (hasChanges) {
                // Simulate saving to server
                setTimeout(() => {
                    const changeText = changes.join(', ');
                    showTaskNotification('Success', `All changes saved: ${changeText}!`);
                    console.log('All changes saved:', changes);
                    
                    // Add activity history
                    addTaskActivity(`Saved: ${changeText}`, 'green');
                }, 1000);
            } else {
                showTaskNotification('Notice', 'No changes to save!');
            }
        }

        function addNewTaskComment(commentText) {
            const commentsContainer = document.querySelector('.space-y-4');
            if (!commentsContainer) return;
            
            const newComment = document.createElement('div');
            newComment.className = 'flex space-x-3';
            newComment.innerHTML = `
                <img class="h-8 w-8 rounded-full bg-purple-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/32" alt="User">
                <div class="flex-1">
                    <div class="bg-gray-50 p-3 rounded-lg">
                        <div class="flex items-center justify-between mb-1">
                            <span class="font-medium text-sm text-gray-900">Ho Du Tuan Dat</span>
                            <span class="text-xs text-gray-500">Just now</span>
                        </div>
                        <p class="text-sm text-gray-700">${commentText}</p>
                    </div>
                </div>
            `;
            
            // Insert at the beginning
            commentsContainer.insertBefore(newComment, commentsContainer.firstChild);
        }

        function addTaskActivity(activity, color) {
            const activityContainer = document.getElementById('activityContainer');
            if (!activityContainer) return;
            
            const newActivity = document.createElement('div');
            newActivity.className = 'flex items-start space-x-3';
            newActivity.innerHTML = `
                <img class="h-6 w-6 rounded-full bg-purple-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/24" alt="User">
                <div class="flex-1">
                    <p class="text-sm text-gray-700">${activity}</p>
                    <p class="text-xs text-gray-500">${new Date().toLocaleString('en-US')}</p>
                </div>
            `;
            
            // Insert at the beginning
            activityContainer.insertBefore(newActivity, activityContainer.firstChild);
        }

        function showTaskNotification(title, message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transform transition-transform duration-300';
            notification.innerHTML = `
                <div class="flex items-center space-x-2">
                    <i class="fas fa-check-circle"></i>
                    <div>
                        <div class="font-medium">${title}</div>
                        <div class="text-sm">${message}</div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Initialize task card click functionality
        function initTaskDetail() {
            console.log('Initializing task card click functionality...');
            
            // Initialize task card click events
            const taskCards = document.querySelectorAll('.task-card');
            taskCards.forEach(card => {
                card.addEventListener('click', function(e) {
                    // Prevent opening if clicking on action buttons
                    if (e.target.closest('button')) {
                        return;
                    }
                    
                    // Prevent opening if we just finished dragging
                    if (this.classList.contains('dragging') || this.classList.contains('just-dragged')) {
                        return;
                    }
                    
                    const taskId = this.getAttribute('data-task-id');
                    const taskTitle = this.getAttribute('data-task-title');
                    const taskDescription = this.getAttribute('data-task-description');
                    const taskType = this.getAttribute('data-task-type');
                    const taskPriority = this.getAttribute('data-task-priority');
                    
                    // Navigate to task detail page with task data
                    navigateToTaskDetail(taskId, taskTitle, taskDescription, taskType, taskPriority);
                });
            });
            
            // Initialize save buttons if they exist
            if (typeof initializeTaskDetailSaveButtons === 'function') {
                initializeTaskDetailSaveButtons();
            }
        }

        // Function to navigate to task detail page
        function navigateToTaskDetail(taskId, taskTitle, taskDescription, taskType, taskPriority) {
            console.log('Navigating to task detail:', { taskId, taskTitle, taskDescription, taskType, taskPriority });
            
            // Store task data in localStorage for task-detail.html to use
            const taskData = {
                id: taskId,
                title: taskTitle,
                description: taskDescription,
                type: taskType,
                priority: taskPriority,
                projectId: 'project-1', // Current project ID
                projectName: 'Library Management System'
            };
            
            localStorage.setItem('currentTaskData', JSON.stringify(taskData));
            
            // Navigate to task detail page
            window.location.href = 'task-detail.html';
        }

        // Initialize Drag and Drop functionality
        function initDragAndDrop() {
            console.log('Initializing drag and drop functionality...');
            
            let draggedElement = null;
            let originalColumn = null;
            
            // Add drag event listeners to task cards
            const taskCards = document.querySelectorAll('.task-card');
            taskCards.forEach(card => {
                card.addEventListener('dragstart', handleDragStart);
                card.addEventListener('dragend', handleDragEnd);
            });
            
            // Add drop event listeners to kanban columns
            const kanbanColumns = document.querySelectorAll('.kanban-column');
            kanbanColumns.forEach(column => {
                column.addEventListener('dragover', handleDragOver);
                column.addEventListener('dragenter', handleDragEnter);
                column.addEventListener('dragleave', handleDragLeave);
                column.addEventListener('drop', handleDrop);
            });
            
            function handleDragStart(e) {
                draggedElement = this;
                originalColumn = this.closest('.kanban-column');
                this.classList.add('dragging');
                
                // Set drag data
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('text/html', this.outerHTML);
                
                console.log('Drag started:', this.getAttribute('data-task-id'));
            }
            
            function handleDragEnd(e) {
                this.classList.remove('dragging');
                this.classList.add('just-dragged');
                
                // Remove just-dragged class after a short delay to prevent accidental clicks
                setTimeout(() => {
                    this.classList.remove('just-dragged');
                }, 300);
                
                draggedElement = null;
                
                // Remove drag-over classes from all columns
                document.querySelectorAll('.kanban-column').forEach(col => {
                    col.classList.remove('drag-over');
                });
                
                console.log('Drag ended');
            }
            
            function handleDragOver(e) {
                e.preventDefault();
                e.dataTransfer.dropEffect = 'move';
            }
            
            function handleDragEnter(e) {
                e.preventDefault();
                this.classList.add('drag-over');
            }
            
            function handleDragLeave(e) {
                // Only remove class if we're leaving the column, not entering a child element
                if (!this.contains(e.relatedTarget)) {
                    this.classList.remove('drag-over');
                }
            }
            
            function handleDrop(e) {
                e.preventDefault();
                this.classList.remove('drag-over');
                
                if (draggedElement && originalColumn !== this) {
                    const taskList = this.querySelector('.kanban-task-list');
                    const taskId = draggedElement.getAttribute('data-task-id');
                    const taskTitle = draggedElement.getAttribute('data-task-title');
                    
                    // Move the task card to the new column
                    taskList.appendChild(draggedElement);
                    
                    // Update task status based on column
                    const newStatus = this.getAttribute('data-column');
                    updateTaskStatus(taskId, newStatus);
                    
                    // Show notification
                    showTaskNotification(
                        'Task moved successfully!',
                        `"${taskTitle}" moved to ${getStatusDisplayName(newStatus)}`
                    );
                    
                    // Add activity log
                    addTaskActivity(`Moved task "${taskTitle}" to ${getStatusDisplayName(newStatus)}`, 'blue');
                    
                    // Update task counts
                    updateTaskCounts();
                    
                    console.log(`Task ${taskId} moved from ${originalColumn.getAttribute('data-column')} to ${newStatus}`);
                }
            }
            
            function updateTaskStatus(taskId, newStatus) {
                // Here you would typically make an API call to update the task status
                console.log(`Updating task ${taskId} status to ${newStatus}`);
                
                // For demo purposes, we'll just log the change
                // In a real application, you would send this to your backend
                const statusUpdate = {
                    taskId: taskId,
                    newStatus: newStatus,
                    timestamp: new Date().toISOString(),
                    userId: 'current-user-id'
                };
                
                // Store in localStorage for demo
                const updates = JSON.parse(localStorage.getItem('taskStatusUpdates') || '[]');
                updates.push(statusUpdate);
                localStorage.setItem('taskStatusUpdates', JSON.stringify(updates));
            }
            
            function getStatusDisplayName(status) {
                const statusMap = {
                    'todo': 'To Do',
                    'inprogress': 'In Progress',
                    'review': 'Review',
                    'done': 'Done'
                };
                return statusMap[status] || status;
            }
            
            function updateTaskCounts() {
                const columns = document.querySelectorAll('.kanban-column');
                columns.forEach(column => {
                    const taskList = column.querySelector('.kanban-task-list');
                    const taskCount = taskList.querySelectorAll('.task-card').length;
                    const countElement = column.closest('.flex-shrink-0').querySelector('.task-count');
                    if (countElement) {
                        countElement.textContent = `(${taskCount})`;
                    }
                });
            }
            
            // Update task counts initially
            updateTaskCounts();
        }

        // Call initTaskDetail and initDragAndDrop when DOM is loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                initTaskDetail();
                initDragAndDrop();
                initInviteMember();
            });
        } else {
            initTaskDetail();
            initDragAndDrop();
            initInviteMember();
        }
        
        // Initialize invite member functionality
        function initInviteMember() {
            const addInviteBtn = document.getElementById('addInviteBtn');
            const inviteEmail = document.getElementById('inviteEmail');
            const inviteRole = document.getElementById('inviteRole');
            const invitedMembersList = document.getElementById('invitedMembersList');
            
            if (addInviteBtn && inviteEmail) {
                addInviteBtn.addEventListener('click', function() {
                    const email = inviteEmail.value.trim();
                    const role = inviteRole.value;
                    
                    if (email) {
                        // Validate VLU email format
                        if (!email.endsWith('@vlu.edu.vn')) {
                            showNotification('Lỗi', 'Vui lòng nhập email VLU hợp lệ (email@vlu.edu.vn)');
                            return;
                        }
                        
                        // Check if member already exists
                        const existingMembers = invitedMembersList.querySelectorAll('.member-item');
                        for (let member of existingMembers) {
                            const memberEmail = member.querySelector('.member-email').textContent;
                            if (memberEmail === email) {
                                showNotification('Lỗi', 'Thành viên này đã được mời!');
                                return;
                            }
                        }
                        
                        // Add member to list
                        const memberItem = document.createElement('div');
                        memberItem.className = 'member-item flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200';
                        memberItem.innerHTML = `
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-user text-blue-600 text-sm"></i>
                                </div>
                                <div>
                                    <div class="flex items-center space-x-2">
                                        <span class="member-email text-sm font-medium text-gray-700">${email}</span>
                                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                            <i class="fas fa-clock mr-1"></i>
                                            Pending
                                        </span>
                                    </div>
                                    <div class="flex items-center space-x-2 mt-1">
                                        <span class="text-xs text-gray-500">Role: ${role}</span>
                                        <span class="text-xs text-gray-500">• Đã gửi lời mời</span>
                                    </div>
                                </div>
                            </div>
                            <button type="button" class="remove-member-btn text-red-500 hover:text-red-700 transition-colors" onclick="removeInvitedMember(this)" title="Xóa thành viên">
                                <i class="fas fa-times"></i>
                            </button>
                        `;
                        invitedMembersList.appendChild(memberItem);
                        inviteEmail.value = '';
                        
                        showNotification('Thành công', `Đã thêm ${email} vào danh sách mời`);
                    } else {
                        showNotification('Lỗi', 'Vui lòng nhập email thành viên');
                    }
                });
            }
            
            // Handle form submission
            const inviteMemberForm = document.getElementById('inviteMemberForm');
            if (inviteMemberForm) {
                inviteMemberForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const invitedMembers = [];
                    const memberItems = invitedMembersList.querySelectorAll('.member-item');
                    
                    if (memberItems.length === 0) {
                        showNotification('Lỗi', 'Vui lòng thêm ít nhất một thành viên');
                        return;
                    }
                    
                    memberItems.forEach(item => {
                        const email = item.querySelector('.member-email').textContent;
                        const roleElement = item.querySelector('.text-xs.text-gray-500');
                        const role = roleElement ? roleElement.textContent.replace('Role: ', '') : 'Member';
                        
                        invitedMembers.push({
                            email: email,
                            role: role,
                            status: 'pending'
                        });
                    });
                    
                    console.log('Sending invitations to:', invitedMembers);
                    showNotification('Thành công', `Đã gửi ${invitedMembers.length} lời mời thành công!`);
                    
                    // Reset form
                    inviteMemberForm.reset();
                    invitedMembersList.innerHTML = '';
                    
                    // Close modal
                    document.getElementById('inviteMemberModal').classList.add('hidden');
                });
            }
        }
        
        // Function to remove invited member
        function removeInvitedMember(button) {
            const memberItem = button.closest('.member-item');
            const email = memberItem.querySelector('.member-email').textContent;
            
            if (confirm(`Bạn có chắc chắn muốn xóa lời mời cho ${email}?`)) {
                memberItem.remove();
                showNotification('Thành công', `Đã xóa lời mời cho ${email}`);
            }
        }
        
        // Function to show notification
        function showNotification(title, message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transform transition-all duration-300 translate-x-full';
            notification.innerHTML = `
                <div class="flex items-center space-x-2">
                    <i class="fas fa-check-circle"></i>
                    <div>
                        <div class="font-medium">${title}</div>
                        <div class="text-sm opacity-90">${message}</div>
                    </div>
                </div>
            `;
            
            // Add to body
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>