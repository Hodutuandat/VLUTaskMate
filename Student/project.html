<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VLUTaskMate - Chi tiết dự án</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../assets/style.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'vlu-red': '#dc2626',
                        'vlu-light-red': '#fef2f2',
                        'vlu-gray': '#6b7280'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="index.html" class="text-2xl font-bold text-vlu-red">VLUTaskMate</a>
                    <span class="mx-4 text-gray-400">/</span>
                    <span class="text-lg font-medium text-gray-900">Hệ thống Quản lý Thư viện</span>
                </div>
                <div class="flex items-center space-x-4">
                    <button class="relative p-2 text-gray-600 hover:text-vlu-red">
                        <i class="fas fa-bell text-xl"></i>
                        <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">2</span>
                    </button>
                    <div class="relative">
                        <button class="flex items-center space-x-2 text-gray-700 hover:text-vlu-red">
                            <img class="h-8 w-8 rounded-full bg-gray-300" src="https://via.placeholder.com/32" alt="User">
                            <span class="text-sm font-medium">Hồ Du Tuấn Đạt</span>
                            <i class="fas fa-chevron-down text-xs"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="flex h-screen bg-gray-50">
        <!-- Sidebar -->
        <aside class="w-64 bg-white shadow-sm">
            <nav class="mt-8">
                <div class="px-4 space-y-2">
                    <a href="index.html" class="flex items-center px-4 py-3 text-gray-600 hover:text-vlu-red hover:bg-gray-50 rounded-lg">
                        <i class="fas fa-folder mr-3"></i>
                        Dự án của tôi
                    </a>
                    <a href="my-tasks.html" class="flex items-center px-4 py-3 text-gray-600 hover:text-vlu-red hover:bg-gray-50 rounded-lg">
                        <i class="fas fa-tasks mr-3"></i>
                        Nhiệm vụ của tôi
                    </a>
                    <a href="notifications.html" class="flex items-center px-4 py-3 text-gray-600 hover:text-vlu-red hover:bg-gray-50 rounded-lg">
                        <i class="fas fa-bell mr-3"></i>
                        Thông báo
                    </a>
                    <a href="profile.html" class="flex items-center px-4 py-3 text-gray-600 hover:text-vlu-red hover:bg-gray-50 rounded-lg">
                        <i class="fas fa-user mr-3"></i>
                        Tài khoản
                    </a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <!-- Project Info -->
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900">Hệ thống Quản lý Thư viện</h1>
                            <div class="text-gray-600 mt-2 space-y-1">
                                <p><i class="fas fa-graduation-cap mr-2"></i>Học kỳ 1 - Năm học 2024-2025</p>
                                <p><i class="fas fa-users mr-2"></i>Lớp CNTT-K15</p>
                                <p><i class="fas fa-chalkboard-teacher mr-2"></i>GV: TS. Nguyễn Văn A</p>
                                <p><i class="fas fa-calendar mr-2"></i>01/12/2024 đến 15/12/2024</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
                                Leader
                            </span>
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800">
                                Đang hoạt động
                            </span>
                            <button class="leave-group-toolbar-btn bg-orange-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-orange-600 transition-colors" data-member="Hồ Du Tuấn Đạt" data-role="Leader">
                                <i class="fas fa-sign-out-alt mr-2"></i>
                                Rời nhóm
                            </button>
                        </div>
                    </div>
                    <p class="text-gray-700">Xây dựng hệ thống quản lý thư viện trực tuyến với các tính năng mượn trả sách, quản lý độc giả, và báo cáo thống kê.</p>
                </div>

                <!-- Navigation Tabs -->
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-6">
                    <nav class="flex space-x-8 px-6">
                        <button class="tab-btn py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium" data-tab="members">
                            <i class="fas fa-users mr-2"></i>
                            Thành viên nhóm
                        </button>
                        <button class="tab-btn active py-4 px-1 border-b-2 border-vlu-red text-vlu-red font-medium" data-tab="tasks">
                            <i class="fas fa-tasks mr-2"></i>
                            Nhiệm vụ
                        </button>
                        <button class="tab-btn py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium" data-tab="evaluation">
                            <i class="fas fa-chart-bar mr-2"></i>
                            Đánh giá
                        </button>
                        <button class="tab-btn py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium" data-tab="close">
                            <i class="fas fa-lock mr-2"></i>
                            Đóng dự án
                        </button>
                    </nav>
                </div>

                <!-- Tab Content -->
                <div id="tabContent">
                    <!-- Members Tab -->
                    <div id="members" class="tab-content hidden" data-tab-content="members">
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-lg font-semibold text-gray-900">Thành viên nhóm</h3>
                                <button id="inviteMemberBtn" class="bg-vlu-red text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-700 transition-colors">
                                    <i class="fas fa-plus mr-2"></i>
                                    Mời thành viên
                                </button>
                            </div>
                            
                            <div class="space-y-4">
                                <!-- Member 1 -->
                                <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                                    <div class="flex items-center space-x-4">
                                        <img class="h-10 w-10 rounded-full bg-gray-300" src="https://via.placeholder.com/40" alt="Member">
                                        <div>
                                            <h4 class="font-medium text-gray-900">Hồ Du Tuấn Đạt</h4>
                                            <p class="text-sm text-gray-500">2374802010097 - 72K29CNTT01</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            Leader
                                        </span>
                                        <button class="kick-member-btn text-red-600 hover:text-red-800 font-medium text-sm px-3 py-1 rounded border border-red-600 hover:bg-red-50 transition-colors" data-member="Hồ Du Tuấn Đạt">
                                            <i class="fas fa-user-times mr-1"></i>
                                            Kick
                                        </button>
                                    </div>
                                </div>

                                <!-- Member 2 -->
                                <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                                    <div class="flex items-center space-x-4">
                                        <img class="h-10 w-10 rounded-full bg-gray-300" src="https://via.placeholder.com/40" alt="Member">
                                        <div>
                                            <h4 class="font-medium text-gray-900">Nguyễn Văn A</h4>
                                            <p class="text-sm text-gray-500">2374802010098 - 72K29CNTT01</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                            Member
                                        </span>
                                        <button class="kick-member-btn text-red-600 hover:text-red-800 font-medium text-sm px-3 py-1 rounded border border-red-600 hover:bg-red-50 transition-colors" data-member="Nguyễn Văn A">
                                            <i class="fas fa-user-times mr-1"></i>
                                            Kick
                                        </button>
                                    </div>
                                </div>

                                <!-- Member 3 -->
                                <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                                    <div class="flex items-center space-x-4">
                                        <img class="h-10 w-10 rounded-full bg-gray-300" src="https://via.placeholder.com/40" alt="Member">
                                        <div>
                                            <h4 class="font-medium text-gray-900">Trần Thị B</h4>
                                            <p class="text-sm text-gray-500">2374802010099 - 72K29CNTT01</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                            Member
                                        </span>
                                        <button class="kick-member-btn text-red-600 hover:text-red-800 font-medium text-sm px-3 py-1 rounded border border-red-600 hover:bg-red-50 transition-colors" data-member="Trần Thị B">
                                            <i class="fas fa-user-times mr-1"></i>
                                            Kick
                                        </button>
                                    </div>
                                </div>

                                <!-- Pending Member -->
                                <div class="flex items-center justify-between p-4 border border-yellow-200 rounded-lg bg-yellow-50">
                                    <div class="flex items-center space-x-4">
                                        <img class="h-10 w-10 rounded-full bg-gray-300" src="https://via.placeholder.com/40" alt="Member">
                                        <div>
                                            <h4 class="font-medium text-gray-900">Lê Văn C</h4>
                                            <p class="text-sm text-gray-500">2374802010100 - 72K29CNTT01</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                            <i class="fas fa-clock mr-1"></i>
                                            Pending
                                        </span>
                                        <button class="kick-member-btn text-red-600 hover:text-red-800 font-medium text-sm px-3 py-1 rounded border border-red-600 hover:bg-red-50 transition-colors" data-member="Lê Văn C">
                                            <i class="fas fa-user-times mr-1"></i>
                                            Kick
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tasks Tab -->
                    <div id="tasks" class="tab-content active" data-tab-content="tasks">
                        <div class="bg-gray-50 rounded-lg p-6">

                            <!-- Kanban Board -->
                            <div class="flex space-x-6 overflow-x-auto pb-4">
                                <!-- To Do Column -->
                                <div class="flex-shrink-0 w-80">
                                    <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                                        <div class="p-4 border-b border-gray-200">
                                            <div class="flex items-center justify-between">
                                                <h4 class="font-medium text-gray-900">To Do</h4>
                                                <button class="text-gray-400 hover:text-gray-600">
                                                    <i class="fas fa-ellipsis-h"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="p-4">
                                            <div class="space-y-3">
                                                <!-- Task Card 1 -->
                                                <div class="bg-gray-50 rounded-lg p-3 cursor-pointer task-card hover:bg-gray-100 transition-colors" data-task-id="1" data-task-title="Sinh viên điểm danh bằng QR" data-task-description="Là sinh viên, tôi muốn quét mã QR để điểm danh nhanh chóng và chính xác." data-task-type="Feature" data-task-priority="High">
                                                    <div class="flex items-start justify-between mb-2">
                                                        <h5 class="font-medium text-gray-900 text-sm">Sinh viên điểm danh bằng QR</h5>
                                                        <button class="text-gray-400 hover:text-gray-600">
                                                            <i class="fas fa-ellipsis-h text-xs"></i>
                                                        </button>
                                                    </div>
                                                    <p class="text-xs text-gray-600 mb-3">Là sinh viên, tôi muốn quét mã QR để điểm danh nhanh chóng và chính xác.</p>
                                                    <div class="flex items-center justify-between">
                                                        <div class="flex items-center space-x-2">
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                                                Feature
                                                            </span>
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                                High
                                                            </span>
                                                        </div>
                                                        <div class="flex items-center space-x-1">
                                                            <img class="h-6 w-6 rounded-full bg-purple-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/24" alt="User">
                                                            <span class="text-xs text-gray-500">2d</span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Task Card 2 -->
                                                <div class="bg-gray-50 rounded-lg p-3 cursor-pointer task-card hover:bg-gray-100 transition-colors" data-task-id="2" data-task-title="Thiết kế Database" data-task-description="Thiết kế cấu trúc database cho hệ thống thư viện" data-task-type="Backend" data-task-priority="High">
                                                    <div class="flex items-start justify-between mb-2">
                                                        <h5 class="font-medium text-gray-900 text-sm">Thiết kế Database</h5>
                                                        <button class="text-gray-400 hover:text-gray-600">
                                                            <i class="fas fa-ellipsis-h text-xs"></i>
                                                        </button>
                                                    </div>
                                                    <p class="text-xs text-gray-600 mb-3">Thiết kế cấu trúc database cho hệ thống thư viện</p>
                                                    <div class="flex items-center justify-between">
                                                        <div class="flex items-center space-x-2">
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                                Backend
                                                            </span>
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                                High
                                                            </span>
                                                        </div>
                                                        <div class="flex items-center space-x-1">
                                                            <img class="h-6 w-6 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/24" alt="User">
                                                            <span class="text-xs text-gray-500">1d</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- Add Task Button -->
                                            <button class="add-card-btn w-full mt-3 p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors text-sm" data-column="todo">
                                                <i class="fas fa-plus mr-2"></i>
                                                Add a task
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- In Progress Column -->
                                <div class="flex-shrink-0 w-80">
                                    <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                                        <div class="p-4 border-b border-gray-200">
                                            <div class="flex items-center justify-between">
                                                <h4 class="font-medium text-gray-900">In Progress</h4>
                                                <button class="text-gray-400 hover:text-gray-600">
                                                    <i class="fas fa-ellipsis-h"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="p-4">
                                            <div class="space-y-3">
                                                <!-- Task Card -->
                                                <div class="bg-gray-50 rounded-lg p-3 cursor-pointer task-card hover:bg-gray-100 transition-colors" data-task-id="3" data-task-title="Frontend Development" data-task-description="Phát triển giao diện người dùng với React" data-task-type="Frontend" data-task-priority="Medium">
                                                    <div class="flex items-start justify-between mb-2">
                                                        <h5 class="font-medium text-gray-900 text-sm">Frontend Development</h5>
                                                        <button class="text-gray-400 hover:text-gray-600">
                                                            <i class="fas fa-ellipsis-h text-xs"></i>
                                                        </button>
                                                    </div>
                                                    <p class="text-xs text-gray-600 mb-3">Phát triển giao diện người dùng với React</p>
                                                    <div class="flex items-center justify-between">
                                                        <div class="flex items-center space-x-2">
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                                                Frontend
                                                            </span>
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                                                Medium
                                                            </span>
                                                        </div>
                                                        <div class="flex items-center space-x-1">
                                                            <img class="h-6 w-6 rounded-full bg-green-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/24" alt="User">
                                                            <span class="text-xs text-gray-500">3d</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- Add Task Button -->
                                            <button class="add-card-btn w-full mt-3 p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors text-sm" data-column="inprogress">
                                                <i class="fas fa-plus mr-2"></i>
                                                Add a task
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Review Column -->
                                <div class="flex-shrink-0 w-80">
                                    <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                                        <div class="p-4 border-b border-gray-200">
                                            <div class="flex items-center justify-between">
                                                <h4 class="font-medium text-gray-900">Review</h4>
                                                <button class="text-gray-400 hover:text-gray-600">
                                                    <i class="fas fa-ellipsis-h"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="p-4">
                                            <div class="space-y-3">
                                                <!-- Task Card -->
                                                <div class="bg-gray-50 rounded-lg p-3 cursor-pointer task-card hover:bg-gray-100 transition-colors" data-task-id="4" data-task-title="API Documentation" data-task-description="Viết tài liệu API cho hệ thống" data-task-type="Docs" data-task-priority="Low">
                                                    <div class="flex items-start justify-between mb-2">
                                                        <h5 class="font-medium text-gray-900 text-sm">API Documentation</h5>
                                                        <button class="text-gray-400 hover:text-gray-600">
                                                            <i class="fas fa-ellipsis-h text-xs"></i>
                                                        </button>
                                                    </div>
                                                    <p class="text-xs text-gray-600 mb-3">Viết tài liệu API cho hệ thống</p>
                                                    <div class="flex items-center justify-between">
                                                        <div class="flex items-center space-x-2">
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                                                Docs
                                                            </span>
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                                Low
                                                            </span>
                                                        </div>
                                                        <div class="flex items-center space-x-1">
                                                            <img class="h-6 w-6 rounded-full bg-orange-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/24" alt="User">
                                                            <span class="text-xs text-gray-500">1d</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- Add Task Button -->
                                            <button class="add-card-btn w-full mt-3 p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors text-sm" data-column="review">
                                                <i class="fas fa-plus mr-2"></i>
                                                Add a task
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Done Column -->
                                <div class="flex-shrink-0 w-80">
                                    <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                                        <div class="p-4 border-b border-gray-200">
                                            <div class="flex items-center justify-between">
                                                <h4 class="font-medium text-gray-900">Done</h4>
                                                <button class="text-gray-400 hover:text-gray-600">
                                                    <i class="fas fa-ellipsis-h"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="p-4">
                                            <div class="space-y-3">
                                                <!-- Task Card -->
                                                <div class="bg-gray-50 rounded-lg p-3 cursor-pointer task-card hover:bg-gray-100 transition-colors" data-task-id="5" data-task-title="Project Setup" data-task-description="Thiết lập dự án ban đầu" data-task-type="Setup" data-task-priority="Completed">
                                                    <div class="flex items-start justify-between mb-2">
                                                        <h5 class="font-medium text-gray-900 text-sm">Project Setup</h5>
                                                        <button class="text-gray-400 hover:text-gray-600">
                                                            <i class="fas fa-ellipsis-h text-xs"></i>
                                                        </button>
                                                    </div>
                                                    <p class="text-xs text-gray-600 mb-3">Thiết lập dự án ban đầu</p>
                                                    <div class="flex items-center justify-between">
                                                        <div class="flex items-center space-x-2">
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                                Setup
                                                            </span>
                                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                                Completed
                                                            </span>
                                                        </div>
                                                        <div class="flex items-center space-x-1">
                                                            <img class="h-6 w-6 rounded-full bg-gray-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/24" alt="User">
                                                            <span class="text-xs text-gray-500">5d</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- Add Task Button -->
                                            <button class="add-card-btn w-full mt-3 p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors text-sm" data-column="done">
                                                <i class="fas fa-plus mr-2"></i>
                                                Add a task
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Add Another List -->
                                <div class="flex-shrink-0 w-80">
                                    <button class="w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center text-gray-500 hover:text-gray-700 hover:border-gray-400 transition-colors">
                                        <i class="fas fa-plus mr-2"></i>
                                        Add another list
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Evaluation Tab -->
                    <div id="evaluation" class="tab-content hidden" data-tab-content="evaluation">
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-lg font-semibold text-gray-900">Đánh giá thành viên</h3>
                                <button id="submitEvaluationBtn" class="bg-vlu-red text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-700 transition-colors">
                                    <i class="fas fa-paper-plane mr-2"></i>
                                    Gửi đánh giá
                                </button>
                            </div>

                            <!-- Project Status Check -->
                            <div id="evaluationStatus" class="mb-6">
                                <!-- This will be populated by JavaScript -->
                            </div>

                            <div class="space-y-6" id="evaluationContent">
                                <!-- Evaluation Form -->
                                <div class="border border-gray-200 rounded-lg p-6">
                                    <h4 class="font-medium text-gray-900 mb-4">Đánh giá thành viên</h4>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Chọn thành viên</label>
                                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                                                <option>Nguyễn Văn A</option>
                                                <option>Trần Thị B</option>
                                                <option>Lê Văn C</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Điểm đánh giá</label>
                                            <div class="flex items-center space-x-2">
                                                <i class="fas fa-star text-yellow-400 text-xl"></i>
                                                <i class="fas fa-star text-yellow-400 text-xl"></i>
                                                <i class="fas fa-star text-yellow-400 text-xl"></i>
                                                <i class="fas fa-star text-yellow-400 text-xl"></i>
                                                <i class="far fa-star text-gray-300 text-xl"></i>
                                            </div>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Nhận xét</label>
                                            <textarea class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" rows="3" placeholder="Nhập nhận xét của bạn..."></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Tag</label>
                                            <div class="flex flex-wrap gap-2">
                                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 cursor-pointer hover:bg-green-200">
                                                    Tích cực
                                                </span>
                                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800 cursor-pointer hover:bg-red-200">
                                                    Không hợp tác
                                                </span>
                                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200">
                                                    Chủ động
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Evaluation Results -->
                                <div class="border border-gray-200 rounded-lg p-6">
                                    <h4 class="font-medium text-gray-900 mb-4">Kết quả đánh giá của bạn</h4>
                                    <div class="space-y-4">
                                        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                            <div>
                                                <h5 class="font-medium text-gray-900">Nguyễn Văn A</h5>
                                                <p class="text-sm text-gray-600">Điểm trung bình: 4.2/5</p>
                                            </div>
                                            <div class="flex items-center space-x-1">
                                                <i class="fas fa-star text-yellow-400"></i>
                                                <i class="fas fa-star text-yellow-400"></i>
                                                <i class="fas fa-star text-yellow-400"></i>
                                                <i class="fas fa-star text-yellow-400"></i>
                                                <i class="far fa-star text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Close Project Tab -->
                    <div id="close" class="tab-content hidden" data-tab-content="close">
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div class="text-center">
                                <i class="fas fa-lock text-4xl text-gray-400 mb-4"></i>
                                <h3 class="text-lg font-semibold text-gray-900 mb-2">Đóng dự án</h3>
                                <p class="text-gray-600 mb-6">Kiểm tra điều kiện trước khi đóng dự án</p>
                                
                                <div class="space-y-4 mb-6">
                                    <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                                        <div class="flex items-center">
                                            <i class="fas fa-check-circle text-green-500 mr-3"></i>
                                            <span class="text-gray-900">Tất cả task đã hoàn thành</span>
                                        </div>
                                        <span class="text-green-600 font-medium">✓</span>
                                    </div>
                                    <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                                        <div class="flex items-center">
                                            <i class="fas fa-check-circle text-green-500 mr-3"></i>
                                            <span class="text-gray-900">Tất cả đánh giá đã gửi</span>
                                        </div>
                                        <span class="text-green-600 font-medium">✓</span>
                                    </div>
                                </div>

                                <button id="closeProjectBtn" class="bg-red-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-colors">
                                    <i class="fas fa-lock mr-2"></i>
                                    Đóng Dự Án
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Invite Member Modal -->
    <div id="inviteMemberModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Mời thành viên</h3>
                    <button id="closeInviteModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" placeholder="example@vlu.edu.vn">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Vai trò</label>
                        <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                            <option>Member</option>
                            <option>Leader</option>
                        </select>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelInvite" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">Hủy</button>
                        <button type="submit" class="px-4 py-2 bg-vlu-red text-white rounded-md hover:bg-red-700">Gửi lời mời</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Create Task Modal -->
    <div id="createTaskModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Tạo Task mới</h3>
                    <button id="closeTaskModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tên task</label>
                        <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Mô tả</label>
                        <textarea class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" rows="3"></textarea>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Deadline</label>
                        <input type="date" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Giao cho</label>
                        <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                            <option>Nguyễn Văn A</option>
                            <option>Trần Thị B</option>
                            <option>Lê Văn C</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Độ ưu tiên</label>
                        <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                            <option>Cao</option>
                            <option>Trung bình</option>
                            <option>Thấp</option>
                        </select>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelTask" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">Hủy</button>
                        <button type="submit" class="px-4 py-2 bg-vlu-red text-white rounded-md hover:bg-red-700">Tạo Task</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Kick Member Confirmation Modal -->
    <div id="kickMemberModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Xác nhận Kick Member</h3>
                    <button id="closeKickModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="mb-6">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-exclamation-triangle text-red-600 text-xl"></i>
                        </div>
                        <div>
                            <h4 class="font-medium text-gray-900">Bạn có chắc chắn muốn kick thành viên này?</h4>
                            <p class="text-sm text-gray-600 mt-1">Hành động này không thể hoàn tác.</p>
                        </div>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <img class="h-8 w-8 rounded-full bg-gray-300" src="https://via.placeholder.com/32" alt="Member">
                            <div>
                                <p class="font-medium text-gray-900" id="kickMemberName">Tên thành viên</p>
                                <p class="text-sm text-gray-500" id="kickMemberInfo">Thông tin thành viên</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex justify-end space-x-3">
                    <button id="cancelKick" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">
                        Hủy
                    </button>
                    <button id="confirmKick" class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700">
                        <i class="fas fa-user-times mr-2"></i>
                        Kick Member
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Card Modal -->
    <div id="addCardModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Thêm Task Mới</h3>
                    <button id="closeAddCardModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="addCardForm">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tên task</label>
                        <input type="text" id="newTaskTitle" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" placeholder="Nhập tên task...">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Mô tả</label>
                        <textarea id="newTaskDescription" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" rows="3" placeholder="Mô tả task..."></textarea>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Loại</label>
                            <select id="newTaskType" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                                <option value="Feature">Feature</option>
                                <option value="Backend">Backend</option>
                                <option value="Frontend">Frontend</option>
                                <option value="Docs">Docs</option>
                                <option value="Setup">Setup</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Độ ưu tiên</label>
                            <select id="newTaskPriority" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                                <option value="High">High</option>
                                <option value="Medium">Medium</option>
                                <option value="Low">Low</option>
                            </select>
                        </div>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelAddCard" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">Hủy</button>
                        <button type="submit" class="bg-vlu-red text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors">Thêm Task</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Task Detail Modal -->
    <div id="taskDetailModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-10 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center space-x-4">
                        <select id="taskStatus" class="px-3 py-1 border border-gray-300 rounded-md text-sm font-medium">
                            <option value="todo">To Do</option>
                            <option value="inprogress">In Progress</option>
                            <option value="review">Review</option>
                            <option value="done">Done</option>
                        </select>
                        <h3 class="text-xl font-medium text-gray-900" id="taskDetailTitle">Tên Task</h3>
                    </div>
                    <button id="closeTaskDetailModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="grid grid-cols-3 gap-6">
                    <!-- Left Column - Task Details -->
                    <div class="col-span-2 space-y-6">
                        <!-- Description -->
                        <div>
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="font-medium text-gray-900">Mô tả</h4>
                                <button id="editDescription" class="text-vlu-red hover:text-red-700 text-sm">
                                    <i class="fas fa-edit mr-1"></i>
                                    Edit
                                </button>
                            </div>
                            <div id="descriptionContent" class="bg-gray-50 p-4 rounded-lg">
                                <p id="taskDescription" class="text-gray-700">Mô tả task sẽ hiển thị ở đây...</p>
                            </div>
                            <div id="descriptionEdit" class="hidden">
                                <textarea id="descriptionTextarea" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" rows="3"></textarea>
                                <div class="flex justify-end space-x-2 mt-2">
                                    <button id="cancelEditDescription" class="px-3 py-1 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 text-sm">Hủy</button>
                                    <button id="saveDescription" class="px-3 py-1 bg-vlu-red text-white rounded-md hover:bg-red-700 text-sm">Lưu</button>
                                </div>
                            </div>
                        </div>

                        <!-- Subtasks -->
                        <div>
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="font-medium text-gray-900">Subtasks</h4>
                                <button id="addSubtaskItem" class="text-vlu-red hover:text-red-700 text-sm">
                                    <i class="fas fa-plus mr-1"></i>
                                    Add subtask
                                </button>
                            </div>
                            <div id="subtasksContainer" class="space-y-2">
                                <div class="subtask-item flex items-center space-x-3 p-2 hover:bg-gray-50 rounded">
                                    <input type="checkbox" class="rounded text-vlu-red focus:ring-vlu-red">
                                    <span class="flex-1 text-sm text-gray-700">Thiết kế giao diện</span>
                                    <button class="text-gray-400 hover:text-red-600 text-xs">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                                <div class="subtask-item flex items-center space-x-3 p-2 hover:bg-gray-50 rounded">
                                    <input type="checkbox" class="rounded text-vlu-red focus:ring-vlu-red">
                                    <span class="flex-1 text-sm text-gray-700">Xây API</span>
                                    <button class="text-gray-400 hover:text-red-600 text-xs">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                                <div class="subtask-item flex items-center space-x-3 p-2 hover:bg-gray-50 rounded">
                                    <input type="checkbox" class="rounded text-vlu-red focus:ring-vlu-red">
                                    <span class="flex-1 text-sm text-gray-700">Lưu dữ liệu</span>
                                    <button class="text-gray-400 hover:text-red-600 text-xs">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Comments -->
                        <div>
                            <h4 class="font-medium text-gray-900 mb-3">Comments</h4>
                            <div class="space-y-4">
                                <div class="flex space-x-3">
                                    <img class="h-8 w-8 rounded-full bg-purple-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/32" alt="User">
                                    <div class="flex-1">
                                        <div class="bg-gray-50 p-3 rounded-lg">
                                            <div class="flex items-center justify-between mb-1">
                                                <span class="font-medium text-sm text-gray-900">Shino</span>
                                                <span class="text-xs text-gray-500">Feb 21, 2025, 12:32 AM</span>
                                            </div>
                                            <p class="text-sm text-gray-700">Task này cần được hoàn thành sớm!</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-4">
                                <textarea id="newComment" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" rows="2" placeholder="Write a comment..."></textarea>
                                <div class="flex justify-end space-x-2 mt-2">
                                    <button id="saveAllChangesBtn" class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm">
                                        <i class="fas fa-save mr-1"></i>
                                        Lưu tất cả
                                    </button>
                                    <button id="addComment" class="px-4 py-2 bg-vlu-red text-white rounded-md hover:bg-red-700 transition-colors text-sm">Thêm Comment</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column - Task Info -->
                    <div class="space-y-6">
                        <!-- Action Buttons -->
                        <div class="space-y-2">
                            <button id="addDatesBtn" class="w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-md text-sm transition-colors">
                                <i class="fas fa-calendar mr-2"></i>
                                Dates
                            </button>
                            <button id="addMembersBtn" class="w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-md text-sm transition-colors">
                                <i class="fas fa-users mr-2"></i>
                                Members
                            </button>
                            <button id="addAttachmentBtn" class="w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-md text-sm transition-colors">
                                <i class="fas fa-paperclip mr-2"></i>
                                Attachment
                            </button>
                        </div>

                        <!-- Labels -->
                        <div>
                            <h4 class="font-medium text-gray-900 mb-3">Labels</h4>
                            <div id="labelsContainer" class="space-y-2">
                                <div class="flex items-center justify-between">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                        Feature
                                    </span>
                                    <button class="remove-label-btn text-gray-400 hover:text-red-600 text-xs transition-colors" data-label="Feature">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                        High
                                    </span>
                                    <button class="remove-label-btn text-gray-400 hover:text-red-600 text-xs transition-colors" data-label="High">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <button id="addLabelBtn" class="mt-2 text-vlu-red hover:text-red-700 text-sm transition-colors">
                                <i class="fas fa-plus mr-1"></i>
                                Add label
                            </button>
                        </div>

                        <!-- Activity -->
                        <div>
                            <h4 class="font-medium text-gray-900 mb-3">Activity</h4>
                            <div id="activityContainer" class="space-y-3">
                                <div class="flex items-start space-x-3">
                                    <img class="h-6 w-6 rounded-full bg-purple-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/24" alt="User">
                                    <div class="flex-1">
                                        <p class="text-sm text-gray-700">Shino added this card to Backlog</p>
                                        <p class="text-xs text-gray-500">Feb 21, 2025, 12:32 AM</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Dates Modal -->
    <div id="addDatesModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Thêm Ngày</h3>
                    <button id="closeDatesModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="addDatesForm">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Ngày bắt đầu</label>
                        <input type="date" id="startDate" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Ngày kết thúc</label>
                        <input type="date" id="endDate" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelDates" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">Hủy</button>
                        <button type="submit" class="bg-vlu-red text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors">Lưu</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Members Modal -->
    <div id="addMembersModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Thêm Thành Viên</h3>
                    <button id="closeMembersModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Tìm thành viên</label>
                    <input type="text" id="searchMember" placeholder="Nhập tên hoặc email..." class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent">
                </div>
                <div id="membersList" class="space-y-2 mb-4">
                    <div class="flex items-center justify-between p-2 hover:bg-gray-50 rounded">
                        <div class="flex items-center space-x-3">
                            <img class="h-8 w-8 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/32" alt="User">
                            <div>
                                <p class="font-medium text-sm text-gray-900">Nguyễn Văn A</p>
                                <p class="text-xs text-gray-500">nguyenvana@vlu.edu.vn</p>
                            </div>
                        </div>
                        <button class="add-member-btn px-3 py-1 bg-vlu-red text-white rounded-md hover:bg-red-700 transition-colors text-sm" data-member="Nguyễn Văn A">
                            Thêm
                        </button>
                    </div>
                    <div class="flex items-center justify-between p-2 hover:bg-gray-50 rounded">
                        <div class="flex items-center space-x-3">
                            <img class="h-8 w-8 rounded-full bg-green-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/32" alt="User">
                            <div>
                                <p class="font-medium text-sm text-gray-900">Trần Thị B</p>
                                <p class="text-xs text-gray-500">tranthib@vlu.edu.vn</p>
                            </div>
                        </div>
                        <button class="add-member-btn px-3 py-1 bg-vlu-red text-white rounded-md hover:bg-red-700 transition-colors text-sm" data-member="Trần Thị B">
                            Thêm
                        </button>
                    </div>
                </div>
                <div class="flex justify-end">
                    <button id="cancelMembers" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">Đóng</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Label Modal -->
    <div id="addLabelModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Thêm Label</h3>
                    <button id="closeLabelModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="addLabelForm">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tên label</label>
                        <input type="text" id="newLabelName" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" placeholder="Nhập tên label...">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Màu sắc</label>
                        <div class="grid grid-cols-5 gap-2">
                            <button type="button" class="label-color-btn w-8 h-8 bg-blue-500 rounded-full border-2 border-transparent hover:border-gray-300" data-color="blue"></button>
                            <button type="button" class="label-color-btn w-8 h-8 bg-green-500 rounded-full border-2 border-transparent hover:border-gray-300" data-color="green"></button>
                            <button type="button" class="label-color-btn w-8 h-8 bg-yellow-500 rounded-full border-2 border-transparent hover:border-gray-300" data-color="yellow"></button>
                            <button type="button" class="label-color-btn w-8 h-8 bg-red-500 rounded-full border-2 border-transparent hover:border-gray-300" data-color="red"></button>
                            <button type="button" class="label-color-btn w-8 h-8 bg-purple-500 rounded-full border-2 border-transparent hover:border-gray-300" data-color="purple"></button>
                        </div>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelLabel" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">Hủy</button>
                        <button type="submit" class="bg-vlu-red text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors">Thêm Label</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Subtask Modal -->
    <div id="addSubtaskModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Thêm Subtask</h3>
                    <button id="closeSubtaskModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="addSubtaskForm">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tên subtask</label>
                        <input type="text" id="newSubtaskName" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" placeholder="Nhập tên subtask...">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Mô tả (tùy chọn)</label>
                        <textarea id="newSubtaskDescription" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-vlu-red focus:border-transparent" rows="2" placeholder="Mô tả subtask..."></textarea>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelSubtask" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">Hủy</button>
                        <button type="submit" class="bg-vlu-red text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors">Thêm Subtask</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Attachment Modal -->
    <div id="addAttachmentModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Thêm File Đính Kèm</h3>
                    <button id="closeAttachmentModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="addAttachmentForm">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Chọn file</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                            <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                            <p class="text-sm text-gray-600">Kéo thả file vào đây hoặc click để chọn</p>
                            <input type="file" id="fileInput" class="hidden" multiple>
                            <button type="button" id="browseFiles" class="mt-2 px-4 py-2 bg-vlu-red text-white rounded-md hover:bg-red-700 transition-colors text-sm">
                                Chọn File
                            </button>
                        </div>
                    </div>
                    <div id="selectedFiles" class="mb-4 space-y-2">
                        <!-- Selected files will be displayed here -->
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelAttachment" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">Hủy</button>
                        <button type="submit" class="bg-vlu-red text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors">Tải Lên</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Leave Group Confirmation Modal -->
    <div id="leaveGroupModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Xác nhận Rời Nhóm</h3>
                    <button id="closeLeaveGroupModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="mb-6">
                    <div class="flex items-center justify-center mb-4">
                        <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-sign-out-alt text-2xl text-orange-600"></i>
                        </div>
                    </div>
                    <div class="text-center">
                        <p class="font-medium text-gray-900" id="leaveGroupMemberName">Tên thành viên</p>
                        <p class="text-sm text-gray-500" id="leaveGroupMemberRole">Vai trò trong nhóm</p>
                    </div>
                    
                    <!-- Leader Transfer Section -->
                    <div id="leaderTransferSection" class="mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg hidden">
                        <div class="flex items-start">
                            <i class="fas fa-crown text-blue-500 mt-1 mr-3"></i>
                            <div class="flex-1">
                                <p class="text-sm font-medium text-blue-900 mb-2">Nhượng quyền Leader</p>
                                <p class="text-xs text-blue-700 mb-3">Vui lòng chọn thành viên để nhượng quyền Leader trước khi rời nhóm:</p>
                                <select id="newLeaderSelect" class="w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm">
                                    <option value="">-- Chọn thành viên --</option>
                                    <option value="Nguyễn Văn A">Nguyễn Văn A (Member)</option>
                                    <option value="Trần Thị B">Trần Thị B (Member)</option>
                                    <option value="Lê Văn C">Lê Văn C (Pending)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 p-4 bg-orange-50 border border-orange-200 rounded-lg">
                        <div class="flex items-start">
                            <i class="fas fa-exclamation-triangle text-orange-500 mt-1 mr-3"></i>
                            <div>
                                <p class="text-sm font-medium text-orange-900 mb-2">Bạn có chắc chắn muốn rời nhóm?</p>
                                <ul class="text-xs text-orange-700 space-y-1">
                                    <li>• Bạn sẽ không thể truy cập dự án này nữa</li>
                                    <li>• Tất cả task được giao sẽ được chuyển cho thành viên khác</li>
                                    <li>• Bạn cần được mời lại nếu muốn tham gia nhóm</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex justify-end space-x-3">
                    <button id="cancelLeaveGroup" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50">
                        Hủy
                    </button>
                    <button id="confirmLeaveGroup" class="bg-orange-500 text-white px-4 py-2 rounded-md hover:bg-orange-600 transition-colors">
                        <i class="fas fa-sign-out-alt mr-2"></i>
                        Rời Nhóm
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="../assets/script.js"></script>
    <script>
        // Task Detail Modal Save Functionality
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing task detail modal save functionality...');
            
            // Initialize save buttons for task detail modal
            initializeTaskDetailSaveButtons();
        });

        function initializeTaskDetailSaveButtons() {
            // Save All Changes Button
            const saveAllChangesBtn = document.getElementById('saveAllChangesBtn');
            if (saveAllChangesBtn) {
                saveAllChangesBtn.addEventListener('click', function() {
                    saveAllChanges();
                });
            }

            console.log('Task detail modal save all button initialized');
        }

        function saveAllChanges() {
            console.log('Saving all changes...');
            
            let hasChanges = false;
            const changes = [];
            
            // 1. Save Task Status
            const taskStatusSelect = document.getElementById('taskStatus');
            const taskTitle = document.getElementById('taskDetailTitle');
            if (taskStatusSelect && taskTitle) {
                const newStatus = taskStatusSelect.value;
                const taskName = taskTitle.textContent;
                changes.push(`Trạng thái: ${newStatus}`);
                hasChanges = true;
            }
            
            // 2. Save Description (if in edit mode)
            const descriptionTextarea = document.getElementById('descriptionTextarea');
            const descriptionContent = document.getElementById('descriptionContent');
            const taskDescription = document.getElementById('taskDescription');
            
            if (descriptionTextarea && !descriptionTextarea.parentElement.classList.contains('hidden')) {
                const newDescription = descriptionTextarea.value.trim();
                if (newDescription) {
                    // Update the description display
                    taskDescription.textContent = newDescription;
                    
                    // Hide edit mode and show content
                    descriptionTextarea.parentElement.classList.add('hidden');
                    descriptionContent.classList.remove('hidden');
                    
                    changes.push('Mô tả task');
                    hasChanges = true;
                }
            }
            
            // 3. Save Subtasks
            const subtaskCheckboxes = document.querySelectorAll('#subtasksContainer input[type="checkbox"]');
            if (subtaskCheckboxes.length > 0) {
                // Update visual feedback for completed subtasks
                subtaskCheckboxes.forEach((checkbox) => {
                    const subtaskText = checkbox.nextElementSibling;
                    if (checkbox.checked) {
                        subtaskText.classList.add('line-through', 'text-gray-500');
                    } else {
                        subtaskText.classList.remove('line-through', 'text-gray-500');
                    }
                });
                changes.push('Subtasks');
                hasChanges = true;
            }
            
            // 4. Save Comments
            const newCommentTextarea = document.getElementById('newComment');
            const commentText = newCommentTextarea ? newCommentTextarea.value.trim() : '';
            
            if (commentText) {
                // Add new comment to the list
                addNewTaskComment(commentText);
                
                // Clear input
                if (newCommentTextarea) {
                    newCommentTextarea.value = '';
                }
                
                changes.push('Bình luận mới');
                hasChanges = true;
            }
            
            // Show notification based on changes
            if (hasChanges) {
                // Simulate saving to server
                setTimeout(() => {
                    const changeText = changes.join(', ');
                    showTaskNotification('Thành công', `Đã lưu tất cả thay đổi: ${changeText}!`);
                    console.log('All changes saved:', changes);
                    
                    // Add activity history
                    addTaskActivity(`Đã lưu: ${changeText}`, 'green');
                }, 1000);
            } else {
                showTaskNotification('Thông báo', 'Không có thay đổi nào để lưu!');
            }
        }

        function addNewTaskComment(commentText) {
            const commentsContainer = document.querySelector('.space-y-4');
            if (!commentsContainer) return;
            
            const newComment = document.createElement('div');
            newComment.className = 'flex space-x-3';
            newComment.innerHTML = `
                <img class="h-8 w-8 rounded-full bg-purple-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/32" alt="User">
                <div class="flex-1">
                    <div class="bg-gray-50 p-3 rounded-lg">
                        <div class="flex items-center justify-between mb-1">
                            <span class="font-medium text-sm text-gray-900">Hồ Du Tuấn Đạt</span>
                            <span class="text-xs text-gray-500">Vừa xong</span>
                        </div>
                        <p class="text-sm text-gray-700">${commentText}</p>
                    </div>
                </div>
            `;
            
            // Insert at the beginning
            commentsContainer.insertBefore(newComment, commentsContainer.firstChild);
        }

        function addTaskActivity(activity, color) {
            const activityContainer = document.getElementById('activityContainer');
            if (!activityContainer) return;
            
            const newActivity = document.createElement('div');
            newActivity.className = 'flex items-start space-x-3';
            newActivity.innerHTML = `
                <img class="h-6 w-6 rounded-full bg-purple-500 text-white text-xs flex items-center justify-center" src="https://via.placeholder.com/24" alt="User">
                <div class="flex-1">
                    <p class="text-sm text-gray-700">${activity}</p>
                    <p class="text-xs text-gray-500">${new Date().toLocaleString('vi-VN')}</p>
                </div>
            `;
            
            // Insert at the beginning
            activityContainer.insertBefore(newActivity, activityContainer.firstChild);
        }

        function showTaskNotification(title, message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transform transition-transform duration-300';
            notification.innerHTML = `
                <div class="flex items-center space-x-2">
                    <i class="fas fa-check-circle"></i>
                    <div>
                        <div class="font-medium">${title}</div>
                        <div class="text-sm">${message}</div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Override existing functions to work with task detail modal
        function initTaskDetail() {
            console.log('Initializing task detail with save functionality...');
            
            // Initialize existing task detail functionality
            const taskCards = document.querySelectorAll('.task-card');
            taskCards.forEach(card => {
                card.addEventListener('click', function(e) {
                    // Prevent opening if clicking on action buttons
                    if (e.target.closest('button')) {
                        return;
                    }
                    
                    const taskId = this.getAttribute('data-task-id');
                    const taskTitle = this.getAttribute('data-task-title');
                    const taskDescription = this.getAttribute('data-task-description');
                    const taskType = this.getAttribute('data-task-type');
                    const taskPriority = this.getAttribute('data-task-priority');
                    
                    openTaskDetail(this);
                });
            });
            
            // Initialize save buttons
            initializeTaskDetailSaveButtons();
        }

        // Call initTaskDetail when DOM is loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initTaskDetail);
        } else {
            initTaskDetail();
        }
    </script>
</body>
</html> 